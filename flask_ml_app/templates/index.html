


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Churn Prediction</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
</head>
<body>

<div class="container mt-5">
    <div class="text-center mb-4">
        <h1 class="display-4">Churn Prediction Models Testing</h1>
        <h5 class="text-muted">By Babalola Charles Olugbenga</h5>
        <p class="lead">Fill out the form below to test different churn prediction models.</p>
    </div>

    <form id="prediction-form" method="POST">
        <div class="row mb-3">
            <div class="col-md-4">
                <label for="State" class="form-label">State</label>
                <select name="State" id="State" class="form-select" required>
                    <option value="AL">Alabama (AL)</option>
   		 <option value="AK">Alaska (AK)</option>
    <option value="AZ">Arizona (AZ)</option>
    <option value="AR">Arkansas (AR)</option>
    <option value="CA">California (CA)</option>
    <option value="CO">Colorado (CO)</option>
    <option value="CT">Connecticut (CT)</option>
    <option value="DE">Delaware (DE)</option>
    <option value="FL">Florida (FL)</option>
    <option value="GA">Georgia (GA)</option>
    <option value="HI">Hawaii (HI)</option>
    <option value="ID">Idaho (ID)</option>
    <option value="IL">Illinois (IL)</option>
    <option value="IN">Indiana (IN)</option>
    <option value="IA">Iowa (IA)</option>
    <option value="KS">Kansas (KS)</option>
    <option value="KY">Kentucky (KY)</option>
    <option value="LA">Louisiana (LA)</option>
    <option value="ME">Maine (ME)</option>
    <option value="MD">Maryland (MD)</option>
    <option value="MA">Massachusetts (MA)</option>
    <option value="MI">Michigan (MI)</option>
    <option value="MN">Minnesota (MN)</option>
    <option value="MS">Mississippi (MS)</option>
    <option value="MO">Missouri (MO)</option>
    <option value="MT">Montana (MT)</option>
    <option value="NE">Nebraska (NE)</option>
    <option value="NV">Nevada (NV)</option>
    <option value="NH">New Hampshire (NH)</option>
    <option value="NJ">New Jersey (NJ)</option>
    <option value="NM">New Mexico (NM)</option>
    <option value="NY">New York (NY)</option>
    <option value="NC">North Carolina (NC)</option>
    <option value="ND">North Dakota (ND)</option>
    <option value="OH">Ohio (OH)</option>
    <option value="OK">Oklahoma (OK)</option>
    <option value="OR">Oregon (OR)</option>
    <option value="PA">Pennsylvania (PA)</option>
    <option value="RI">Rhode Island (RI)</option>
    <option value="SC">South Carolina (SC)</option>
    <option value="SD">South Dakota (SD)</option>
    <option value="TN">Tennessee (TN)</option>
    <option value="TX">Texas (TX)</option>
    <option value="UT">Utah (UT)</option>
    <option value="VT">Vermont (VT)</option>
    <option value="VA">Virginia (VA)</option>
    <option value="WA">Washington (WA)</option>
    <option value="WV">West Virginia (WV)</option>
    <option value="WI">Wisconsin (WI)</option>
    <option value="WY">Wyoming (WY)</option>
                </select>
            </div>
            <div class="col-md-4">
                <label for="Account_length" class="form-label">Account Length</label>
                <input type="number" name="Account length" id="Account_length" class="form-control" required>
            </div>
            <div class="col-md-4">
                <label for="Area_code" class="form-label">Area Code</label>
                <input type="number" name="Area code" id="Area_code" class="form-control" required>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-4">
                <label for="International_plan" class="form-label">International Plan</label>
                <select name="International plan" id="International_plan" class="form-select" required>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                </select>
            </div>
            <div class="col-md-4">
                <label for="Voice_mail_plan" class="form-label">Voice Mail Plan</label>
                <select name="Voice mail plan" id="Voice_mail_plan" class="form-select" required>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                </select>
            </div>
            <div class="col-md-4">
                <label for="Number_vmail_messages" class="form-label">Number of Voicemail Messages</label>
                <input type="number" name="Number vmail messages" id="Number_vmail_messages" class="form-control" required>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-4">
                <label for="Total_day_minutes" class="form-label">Total Day Minutes</label>
                <input type="number" name="Total day minutes" id="Total_day_minutes" class="form-control" required>
            </div>
            <div class="col-md-4">
                <label for="Total_day_calls" class="form-label">Total Day Calls</label>
                <input type="number" name="Total day calls" id="Total_day_calls" class="form-control" required>
            </div>
            <div class="col-md-4">
                <label for="Total_day_charge" class="form-label">Total Day Charge</label>
                <input type="number" step="0.01" name="Total day charge" id="Total_day_charge" class="form-control" required>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-4">
                <label for="Total_eve_minutes" class="form-label">Total Evening Minutes</label>
                <input type="number" name="Total eve minutes" id="Total_eve_minutes" class="form-control" required>
            </div>
            <div class="col-md-4">
                <label for="Total_eve_calls" class="form-label">Total Evening Calls</label>
                <input type="number" name="Total eve calls" id="Total_eve_calls" class="form-control" required>
            </div>
            <div class="col-md-4">
                <label for="Total_eve_charge" class="form-label">Total Evening Charge</label>
                <input type="number" step="0.01" name="Total eve charge" id="Total_eve_charge" class="form-control" required>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-4">
                <label for="Total_night_minutes" class="form-label">Total Night Minutes</label>
                <input type="number" name="Total night minutes" id="Total_night_minutes" class="form-control" required>
            </div>
            <div class="col-md-4">
                <label for="Total_night_calls" class="form-label">Total Night Calls</label>
                <input type="number" name="Total night calls" id="Total_night_calls" class="form-control" required>
            </div>
            <div class="col-md-4">
                <label for="Total_night_charge" class="form-label">Total Night Charge</label>
                <input type="number" step="0.01" name="Total night charge" id="Total_night_charge" class="form-control" required>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-4">
                <label for="Total_intl_minutes" class="form-label">Total International Minutes</label>
                <input type="number" name="Total intl minutes" id="Total_intl_minutes" class="form-control" required>
            </div>
            <div class="col-md-4">
                <label for="Total_intl_calls" class="form-label">Total International Calls</label>
                <input type="number" name="Total intl calls" id="Total_intl_calls" class="form-control" required>
            </div>
            <div class="col-md-4">
                <label for="Total_intl_charge" class="form-label">Total International Charge</label>
                <input type="number" step="0.01" name="Total intl charge" id="Total_intl_charge" class="form-control" required>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-4">
                <label for="Customer_service_calls" class="form-label">Customer Service Calls</label>
                <input type="number" name="Customer service calls" id="Customer_service_calls" class="form-control" required>
            </div>
            <div class="col-md-4">
                <label for="model" class="form-label">Select Model</label>
                <select class="form-select" id="model" name="model" required>
                    <option value="Decision Tree">Decision Tree</option>
                    <option value="Gradient Boosting">Gradient Boosting</option>
                    <option value="Random Forest">Random Forest</option>
                    <option value="Stacking">Stacking</option>
                </select>
            </div>
        </div>

        <div class="text-center">
            <button type="submit" class="btn btn-primary">Predict</button>
        </div>
    </form>
</div>

<!-- Modal for displaying prediction results -->
<div class="modal fade" id="resultModal" tabindex="-1" aria-labelledby="resultModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="resultModalLabel">Prediction Result</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <h6 id="model-name"></h6>
                <p id="prediction-label"></p>
                <p id="shap-text"></p>
                <img id="shap-feature-importance" src="" alt="SHAP Feature Importance" class="img-fluid mb-3">
                <img id="shap-summary-plot" src="" alt="SHAP Summary Plot" class="img-fluid">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
<script>
    $(document).ready(function () {
        $('#prediction-form').on('submit', function (e) {
            e.preventDefault();

            $.ajax({
                type: 'POST',
                url: '/',
                data: $(this).serialize(),
                success: function (response) {
                    // Populate modal with response data
                    $('#model-name').text('Model: ' + response.model_name);
                    $('#prediction-label').text('Prediction: ' + response.prediction_label);
                    $('#shap-text').text(response.shap_text);
                    $('#shap-feature-importance').attr('src', response.shap_feature_importance_path);
                    $('#shap-summary-plot').attr('src', response.shap_summary_plot_path);

                    // Show the modal
                    $('#resultModal').modal('show');
                },
                error: function () {
                    alert('Error occurred during prediction. Please try again.');
                }

            });
        });
    });
</script>
</body>
</html>









